# 如何在请求数据接口时传递动态参数 {#task_1545743 .task}

本文档为您介绍使用节点编程功能，在请求数据接口时传递动态参数，实现**Tab列表**和**基本柱图**联动的方法。

准备好您的交互需求。

本案例的交互需求为：当单击**Tab列表**的某一页签时，**基本柱图**传入**API**数据源内对应的id字段值作为参数，实现**基本柱图**的数据联动效果。

旧版本的DataV使用回调ID的方法来配置图表数据联动。但是在回调ID配置完成后，并不能直观动态地看到回调ID的传递者和接收者。新版本的DataV为您提供了节点编程功能，节点编程通过连线将上下游串联起来，使得数据链路更清晰。

本案例的实际应用场景为：图表联动、图表下钻、服务调用、数据报警等。

1.  参见[添加组件](../../../../cn.zh-CN/管理组件/添加组件.md#)，在大屏编辑器页面搭建所需要的**基本柱图**和**Tab列表**组件。![添加组件并配置组件在大屏编辑器内的样式](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/1227026/156654105754315_zh-CN.png)


2.  配置**Tab列表**和**基本柱图**的样式和数据。![配置组件样式](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/1227026/156654105754343_zh-CN.png)

 
    1.  单击**Tab列表**，在右侧的配置面板中，将**列数**设置为**2**。
    2.  切换到**Tab列表**的数据面板中，将数据源配置为如下所示的数据。![Tab列表数据配置](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/1227026/156654105754533_zh-CN.png)

 

        ``` {#codeblock_r8g_dtc_5us}
        [
            {
                "id": 1,
                "content": "销售额"
            },
            {
                "id": 2,
                "content": "数量"
            }
        ]
        ```

    3.  单击**基本柱图**，在右侧的数据面板中，将数据源配置为如下所示的API数据。![配置基本柱图的API数据源](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/1227026/156654105754538_zh-CN.png)

 

        **说明：** API数据源的格式为http://api.test，并且需要与**基本柱图**的默认字段相匹配。

3.  组件配置完样式后，单击大屏编辑页面右上角的**配置节点编程**图标。![配置节点编程图标](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/1161791/156654105754013_zh-CN.png)


4.  在节点编程配置页面，将左侧的**Tab列表**和**基本柱图**节点拖至画布中。
5.  将**Tab列表**的**当Tab点击时**事件与**基本柱图**的**请求基本柱图接口**动作连线。
6.  在连线中添加一个转换器，并命名为**动态传参**。 具体操作方法请参见[配置节点编程](cn.zh-CN/节点编程使用说明/配置节点编程.md#)。 转换器添加成功后，最终效果如下图所示。

    ![组件连线样式](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/1227026/156654105754345_zh-CN.png)

7.  配置转换器。 
    1.  右键单击名称为**动态传参**的转换器，选择**编辑**。
    2.  在转换器设置对话框的转换器脚本编辑区域，输入转换条件，完成后单击**保存**。 当前转换器的示例代码如下。

        ``` {#codeblock_ngh_isv_uwf}
        return {
          id:data.id   //柱图api将添加参数id:data.id，重新请求数据。
        };
        ```

        **说明：** 当单击Tab时，触发数据请求，柱图API将添加参数`id:data.id`，重新请求数据。例如`data.id`为1，请求API将变为`http://api.test?id=1`。

8.  转换器配置完成后，单击节点编程配置页面右上角的**应用**图标，将交互效果应用到大屏项目中。
9.  单击页面左上角的**返回**图标，返回大屏编辑器页面。单击**预览**，查看**Tab列表**控制**基本柱图**在请求数据接口时传递动态参数的交互效果。![控制动态参数](images/54346_zh-CN.gif)



