# 配置学区地图单选框交互

本文档为您介绍通过**单选框**实现不同类型学校的散点层数据的切换展示，以及**Tab列表**和**单选框**的双重触发判断方法。例如**Tab列表**选择**小学**，**单选框**选择**公办**，那么最终实现在可视化应用上展示所有**公办小学**的散点层信息。

完成[配置学区地图Tab列表交互](/cn.zh-CN/最佳实践/使用DataV蓝图编辑器搭建交互式学区地图可视化应用教程/配置学区地图蓝图编辑器交互/配置学区地图Tab列表交互.md)操作，本文档将在其基础上继续添加节点和连线。

需要实现的交互：通过控制组件**单选框**内的**全选/公办/私办**选项和**Tab列表**内的**小学/初中**选项，控制目标组件**散点层**的显隐效果。

可实现方案有两种：

-   使用触发器控制对应散点层的显隐样式，本文使用此方案，操作步骤如下。您也可以通过转换器来实现，详情请参见[如何使用Tab列表控制组件显隐](/cn.zh-CN/蓝图编辑器使用说明/常见问题/如何使用Tab列表控制组件显隐.md)。
-   切换散点层内的数据data/\[\]，比较复杂，不建议使用此方案。

1.  在画布编辑器图层栏内，选中左侧**地图&固定内容**组中的**单选框**组件，右键单击选择**导出到蓝图编辑器**。

    ![导出到蓝图编辑器](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6917716951/p135016.png)

2.  在在蓝图编辑器页面，将左侧的**单选框**节点拖至画布中。

3.  按照以下说明进行连线。

    将**单选框**的**当前值变化时**事件分别与**公办小学点**和**公办初中点**的**显示**动作连线。

4.  在连线中添加两个**串行数据处理**节点，分别命名为**小学**和**初中**。

    具体操作方法请参见[配置蓝图编辑器](/cn.zh-CN/蓝图编辑器使用说明/配置蓝图编辑器.md)。

5.  按照以下说明继续添加其他连线和**串行数据处理**节点。

    1.  将**小学**的**串行数据处理**节点分别与**民办小学**的**显示**和**隐藏**动作连线。

    2.  在每条连线中分别添加一个**串行数据处理**节点，命名为**全选**、**公办**和**民办**。

    3.  按照以下说明进行连线。

        -   将**全选**的**串行数据处理**节点分别与**公办小学点**和**民办小学**的**显示**动作连线。
        -   将**公办**的**串行数据处理**节点分别与**公办小学点**的**显示**动作和**民办小学**的**隐藏**动作连线。
        -   将**民办**的**串行数据处理**节点分别与**公办小学点**的**隐藏**动作和**民办小学**的**显示**动作连线。
        最终的连线效果如下。

        ![触发器连线](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0027716951/p55410.png)

    4.  使用同样的方式对**初中**节点进行连线并添加**串行数据处理**节点。

        最终的连线效果如下。

        ![触发器连线](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0027716951/p55411.png)

        连线的原理为：

        -   将**全选**的**串行数据处理**节点分别与**公办**和**民办**的**显示**动作连线。
        -   将**公办**的**串行数据处理**节点分别与**公办**的**显示**动作和**民办**的**隐藏**动作连线。
        -   将**民办**的**串行数据处理**节点分别与**公办**的**隐藏**动作和**民办**的**显示**动作连线。
6.  配置**串行数据处理**节点。

    1.  配置**小学**的**串行数据处理**节点。

        ![tab控制为小学判断触发器代码](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0027716951/p54799.png)

        ```
        return getCallbackValue('tabID') && getCallbackValue('tabID') == "1"; //初中触发情况反之为== "2"。
        ```

        以上代码用于获取**Tab列表**中**小学**的触发判断条件。在当前小学触发条件下，小学相关的散点层组件都显示在可视化应用相应位置；初中相关的散点层组件不显示在可视化应用中。

    2.  配置**初中**的**串行数据处理**节点。

        ```
        return getCallbackValue('tabID') && getCallbackValue('tabID') == "2"; 
        ```

    3.  配置**全选**的**串行数据处理**节点。

        ![全选触发器代码](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0027716951/p54801.png)

        ```
        return data.value == "全选"; //公办或民办的触发情况反之为== "公办"或"民办"。
        ```

        以上代码用于获取**单选框**组件中全选状态的触发判断条件。在当前全选触发条件下，全部散点层都显示在可视化应用相应位置，反之则显示部分散点层。

    4.  配置**公办**的**串行数据处理**节点。

        ```
        return data.value == "公办";
        ```

    5.  配置**民办**的**串行数据处理**节点。

        ```
        return data.value == "民办";
        ```


所有连线和**串行数据处理**节点都配置完成后，最终效果如下图所示。

![单选框连线样式](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0027716951/p54802.png)

以上配置实现了双重触发判断，即首先判断**Tab列表**中选择的是**小学**还是**中学**，在此基础上再判断**单选框**中选择的是**民办**、**公办**还是**全选**，最终组合筛选出对应的散点显示在可视化应用的地图区域中。

