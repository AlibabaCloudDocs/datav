# 配置学区地图轮播列表交互

本文档为您介绍当单击**轮播列表**组件时，切换展示对应学校在地图上的位置信息和数据的方法。

需要实现的交互：当单击用来展示学校排名的**轮播列表**组件内的某一行时，在**地图**组件上定位该学校位置，并通过**散点层**子组件返回该学校位置上的数据。

实现方案：**轮播列表**组件的数据中包含学校的位置数据。当单击**轮播列表**组件的某一行时，获取该行的位置数据，**基础平面地图**父组件对应更新数据修改经纬度，**散点层**返回对应的点位数据。

1.  在画布编辑器图层栏内，选中左侧**小学**文件夹下的**小学学校列表**、**初中**下的**初中学校列表**、**地图&固定内容**下的**基础平面地图**和**地图&固定内容** \> **基础平面地图**下的**散点层**四个组件，右键单击选择**导出到蓝图编辑器**。

2.  在画布编辑器页面左上角，单击**蓝图编辑器**图标（![蓝图编辑器图标](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3571888951/p67020.png)），切换到蓝图编辑器配置页面。

3.  在蓝图编辑器页面，将左侧**小学**文件夹下的**小学学校列表**、**初中**下的**初中学校列表**、**地图&固定内容**下的**基础平面地图**和**地图&固定内容** \> **基础平面地图**下的**散点层**四个组件节点拖至画布中。

4.  按照以下说明连线。

    -   将**初中学校列表**的**当点击单行时**事件与**散点层**的**导入数据接口**连线。
    -   将**小学学校列表**的**当点击单行时**事件与**基础平面地图**的**导入数据接口**连线。
5.  连线完成后，每条连线中间会自动添加一个**串行数据处理**节点，将节点分别命名为**提取散点数据**和**地图父组件定位缩放**。

    具体操作方法请参见[配置蓝图编辑器](/cn.zh-CN/蓝图编辑器使用说明/配置蓝图编辑器.md)。

6.  将**初中学校列表**和**小学学校列表**的**当点击单行时**事件分别与**提取散点数据**和**地图父组件定位缩放**的**串行数据处理**节点连线。

    连线完成后，效果如下图所示。

    ![定位地图样式连线](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/7337716951/p54948.png)

7.  配置**串行数据处理**节点。

    1.  右键单击名称为**提取散点数据**的**串行数据处理**节点，进入右侧配置面板，选择面板内**其他配置**栏下方的处理方法，单击右侧箭头打开脚本编辑区域。

    2.  在脚本编辑区域，输入代码，完成后单击**保存**。

        ![提取散点数据转换器代码](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/7337716951/p54949.png)

        当前处理方法的示例代码如下。

        ```
        return [
          {
            "id": 1,
            "name": data.name,
            "address": data.address,
            "lat": data.lat,
            "lng": data.lng,
            "type": "ok",
          }
        ];
        ```

        **说明：** 由于**轮播列表**组件中的数据中包含了所有的地理信息，所以当前转换器需要提取的数据都可以直接从上游的**轮播列表**组件抛出的数据中获取。

    3.  使用同样的方式配置**地图父组件定位缩放**的**串行数据处理**节点。

        ![地图父组件定位缩放转换器代码](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/7337716951/p54950.png)

        当前处理方法的示例代码如下。

        ```
        return [{
          "lng": data.lng,
          "lat": data.lat,
          "zoom": 13
        }];
        ```


