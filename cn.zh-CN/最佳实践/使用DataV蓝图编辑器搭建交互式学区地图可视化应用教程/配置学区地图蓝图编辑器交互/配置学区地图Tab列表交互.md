# 配置学区地图Tab列表交互

本文档为您介绍通过单击**Tab列表**选项，切换展示小学和初中的统计信息（包括学校数量、区位占比等）和地理位置信息的方法。

本文档包括以下两个场景的配置。

-   [Tab列表切换小学和初中的统计信息](#section_ydg_17n_1dc)。
-   [Tab列表切换小学和初中的地理位置信息](#section_dl2_ve5_qkq)。

## Tab列表切换小学和初中的统计信息

需要实现的交互：当单击**Tab列表**的选项时，可视化应用中切换小学和初中2类学校的统计信息。

可实现方案：

-   **Tab列表**控制成组组件的显隐样式，详情请参见[如何使用Tab列表控制组件显隐](/cn.zh-CN/蓝图编辑器使用说明/常见问题/如何使用Tab列表控制组件显隐.md)。
-   控制成组组件的位置显示，本文以此为例，具体操作步骤如下。

1.  在画布编辑器图层栏内，选中左侧**小学**组、**初中**组和**地图&固定内容**组中的**Tab列表**组件，右键单击选择**导出到蓝图编辑器**。

    ![导出到蓝图编辑器](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/8507716951/p135100.png)

2.  在画布编辑器页面左上角，单击**蓝图编辑器**图标（![蓝图编辑器图标](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3571888951/p67020.png)），切换到蓝图编辑器配置页面。

3.  在蓝图编辑器页面，将左侧**小学**组、**初中**组和**地图&固定内容**中的**Tab列表**组件节点拖至画布中。

4.  按照以下说明进行连线。

    将**Tab列表**的**当Tab点击时**事件分别与**小学**组和**初中**组的**显示在指定位置**动作连线。

5.  连线完成后，每条连线中间会自动添加一个**串行数据处理**节点，将节点分别命名为**小学位置判断**和**初中位置判断**。

    具体操作方法请参见[配置蓝图编辑器](/cn.zh-CN/蓝图编辑器使用说明/配置蓝图编辑器.md)。转换器添加完成的效果如下图所示。

    ![位置连线样式](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2607716951/p54669.png)

6.  配置**串行数据处理**节点。

    1.  右键单击名称为**小学位置判断**的**串行数据处理**节点，进入右侧配置面板，选择面板内**其他配置**栏下方的处理方法，单击右侧箭头打开脚本编辑区域。

    2.  在脚本编辑区域，输入代码，完成后单击**保存**。

        ![小学位置判断转换器编辑](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2607716951/p54670.png)

        当前处理方法的示例代码如下。

        ```
        if (data.id == 1) {     //小学位置判断。
          return {
            "x": -16,
            "y": 160            //x,y轴数据代表目标位置处。
          };
        } else {
          return {
            "x": -16,
            "y": 1080          //这个数据下的位置将被被移除画布范围。
          };
        }
        ```

    3.  使用同样的方式配置**初中位置判断**处理方法。

        当前处理方法的示例代码如下。

        ```
        if (data.id == 2) {     //初中位置判断。
          return {
            "x": -16,
            "y": 160            //x,y轴数据代表目标位置处。
          };
        } else {
          return {
            "x": -16,
            "y": 1080          //这个数据下的位置将被被移除画布范围。
          };
        }
        ```


## Tab列表切换小学和初中的地理位置信息

需要实现的交互：当单击**Tab列表**的选项时，可视化应用中的**基础平面地图**组件切换小学和初中2个区域热力层样式，并显示对应的散点。

实现方案：使用**Tab列表**和触发器控制地图子组件的显隐样式，具体操作步骤如下。您也可以通过转换器实现，详情请参见[如何使用Tab列表控制组件显隐](/cn.zh-CN/蓝图编辑器使用说明/常见问题/如何使用Tab列表控制组件显隐.md)。

1.  在蓝图编辑器页面，将左侧节点中的**公办小学**、**公办初中**、**公办小学点**、**公办初中点**、**民办小学**和**民办初中**六个节点拖至画布中。

    **说明：** **Tab列表**节点在上一步中已经添加至画布中，不需要重复添加，可在下文的步骤中继续使用。

2.  按照以下说明进行节点连线，并添加逻辑节点。

    1.  将**Tab列表**中的**当Tab点击时**事件与**公办小学**的**显示**动作连线。

    2.  在上述连线中添加**串行数据处理**节点，命名为**id=1：小学**。

        详细操作方法请参见[配置蓝图编辑器](/cn.zh-CN/蓝图编辑器使用说明/配置蓝图编辑器.md)。

    3.  将**Tab列表**中的**当Tab点击时**事件与**公办初中**的**显示**动作连线。

    4.  在上述连线中添加**串行数据处理**节点，命名为**id=2：初中**。

        详细操作方法请参见[配置蓝图编辑器](/cn.zh-CN/蓝图编辑器使用说明/配置蓝图编辑器.md)。

3.  按照以下说明完成**串行数据处理**节点和组件节点之间的连线。

    -   将**id=1：小学**的**串行数据处理**节点与**公办小学点**和**民办小学**的**显示**动作连线；与**公办初中点**和**民办初中**的**隐藏**动作连线。
    -   将**id=2：初中**的**串行数据处理**节点与**公办小学点**和**民办小学**的**隐藏**动作连线；与**公办初中点**和**民办初中**的**显示**动作连线。
    连线完成后的样式如下图所示（截图中只包含了部分节点与连线）。

    ![控制地图子组件显隐](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2607716951/p54711.png)

4.  配置**串行数据处理**节点。

    1.  右键单击名称为**id=1：小学**的**串行数据处理**节点，进入右侧配置面板，选择面板内**其他配置**栏下方的处理方法，单击右侧箭头打开脚本编辑区域。

    2.  在脚本编辑区域，输入代码，完成后单击**保存**。

        ![小学子组件触发器代码](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2607716951/p54718.png)

        当前处理方法的示例代码如下。

        ```
        return data.id == 1;
        ```

        **说明：** 以上触发条件的原理是：单击小学Tab时，三个小学相关的地图子组件显示在可视化应用相应位置；三个初中相关的地图子组件隐藏不显示在可视化应用中。

    3.  使用同样的方式配置**id=2：初中**处理方法，示例代码如下。

        ```
        return data.id == 2;
        ```

    由于**Tab列表**控制地图子组件显隐的同时要考虑到和**单选框**选项内的数据保持一致，因此需要继续执行以下步骤进行配置。

5.  在**id=1：小学****串行数据处理**节点与**公办小学点**和**民办小学**的连线中分别添加两个**串行数据处理**节点，并分别命名为**schooltype=公办**和**schooltype=民办**。

6.  在**id=2：初中**的**串行数据处理**节点与**公办初中点**和**民办初中**的连线中分别添加两个**串行数据处理**节点，并分别命名为**schooltype=公办**和**schooltype=民办**。

    **串行数据处理**节点添加完成后，最终效果实现双重判断标准，部分截图如下所示。

    ![双重判断连线](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2607716951/p54805.png)

7.  使用同样的方式，按照以下说明，配置用于**单选框**判断的触发器。

    ![schooltype=公办单选框判断代码](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2607716951/p54806.png)

    **说明：**

    在进行以下配置前，您需要首先在画布编辑器内配置**单选框**组件的交互事件。

    在**单选框**组件的交互面板中，选中**当值变化时**右侧的**启用**，在value字段对应的**绑定到变量**输入框中输入schoolType。

    ![设置变量值](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2607716951/p54809.png)

    -   **schooltype=公办**触发器的触发条件为：

        ```
        return getCallbackValue('schoolType') && (getCallbackValue('schoolType') == "全选" || getCallbackValue('schoolType') == "公办"); 
        ```

        以上代码的作用是获取**单选框**中全局变量的值，判断当前单选框的状态。

    -   **schooltype=民办**触发器的触发条件为：

        ```
        return getCallbackValue('schoolType') && (getCallbackValue('schoolType') == "全选" || getCallbackValue('schoolType') == "民办"); 
        ```


